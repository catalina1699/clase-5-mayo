<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
       <!-- Vamos a buscar la biblioteca Chart.js-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,300;0,400;0,600;1,400&display=swap");
            :root {
                --bs-body-font-family: "Josefin sans", sans-serif;
                --bs-body-color: #f7f7e6;
                --bs-body-bg: #030114;
            }
            body {
                background-image: url(https://picsum.photos/id/238/2560/1440/?blur=6);
                background-repeat: no-repeat;
                background-position: center bottom;
                background-size: auto;
            }
        </style>
        <title>Introducción al Desarrollo Front End con HTML, CSS y JavaScript</title>
    </head>
    <body>
        <header>
            <div class="container">
                <div class="row pt-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                        <h1 class="display-4 text-center py-2">Hate crimes in New York city</h1>
                        <p class="lead">
                            Hate crimes are is a prejudice-motivated crime which occurs when a perpetrator targets a victim because of their membership (or perceived membership) of a certain social group or racial demographic. .
                        </p>
                        <p>New york is a very diverse city, people from diferent ethnicities, sexual orientation, genre, and religious beliefs coexits in this space, but that coexistence is not always peaceful</p>
                        <p>
                            The records of <a href="https://github.com/catalina1699/csv/blob/main/Hoja%20de%20c%C3%A1lculo%20sin%20t%C3%ADtulo%20-%20Hoja%201.csv" target="_blank" class="link-light">the hate crimes commited in 2020</a> we
                            can get the following data
                        </p>
                    </div>
                </div>
            </div>
        </header>

        <main class="container">
            <div class="accordion mx-md-5 my-5 rounded-0" id="accordionExample">
                <!--Etnia-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header bg-dark" id="headingOne">
                        <button class="accordion-button rounded-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">ethnicities</button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                                The NYC population is composed of the following ethnicities in these percentages
                            </p>
                            <div class="col-md-6 mx-auto mb-3">
                                <canvas id="primerCan" width="100" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Orientacion sexual-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Sexual Orientation</button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>Of the total population of NYC a total of 570,000 self-identify as gay or bisexual</p>
                            <div class="col-md-6 mx-auto mb-3">
                                <canvas id="segundoCan" width="100" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Grupos afectados-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Victims of Hate crimes</button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>These are the diferent groups who are targeted by Hate Crimes, each group is targetes in a different extent</p>
                            <div class="col-md-6 mx-auto mb-3">
                                <canvas id="tercerCan" width="100" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Sobrevivientes por clases-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">Perpetrators by Age</button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                                The information of the perpetrators is organized by age groups.
                            </p>
                            <canvas id="cuartoCan" width="100" height="30"></canvas>
                        </div>
                    </div>
                </div>
                <!--Mujeres y niños primero-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFive">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">Perpetrators by Genre</button>
                    </h2>
                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>The information of the perpetrators is organized by genre.</p>
                            <canvas id="quintoCan" width="100" height="30"></canvas>
                        </div>
                    </div>
                </div>
                <!--Extra-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingSix">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseFive">Perpetrators by ethnicities</button>
                    </h2>
                    <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>The information of the perpetrators is ordered by ethnicities</p>
                            <canvas id="sextoCan" width="100" height="50"></canvas>
                        </div>
                    </div>
                </div>
                <!--Fin-->
            </div>
            <div class="row">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                    <p>If you want to know more about this theme you can visit...</p>
                </div>
            </div>
        </main>

        <aside>
            <div class="container">
                <div class="row py-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto small text-center">
                        <p>
                            Fuentes: <a href="https://historia.nationalgeographic.com.es/a/historia-titanic-tragedia-barco-insumergible_16344">La historia del Titanic, la tragedia del barco insumergible</a>,
                            <a href="https://rpubs.com/paraneda/titanic">RPubs - Titanic</a>, otra y otra más.
                        </p>
                    </div>
                </div>
            </div>
        </aside>

        <footer>
            <div class="container">
                <div class="row">
                    <div class="col"><p class="text-muted mt-5 text-center small">Bootstrap v5.1 y Charts.js</p></div>
                </div>
            </div>
        </footer>

       
        <!-- Un gran script, que contiene una función asincrónica para ir a buscar un JSON con -->
        <script>
            async function todo() {
                //el fetch
                const consulta = await fetch("https://raw.githubusercontent.com/catalina1699/json_clase8/main/datos.json");
                const data = await consulta.json();
                //algunas variables para calcular

                var lasMujeres = 0;
                var losHombres = 0;
                //Grupos atacados
                var lesLGBT = 0;
                var lesJudios = 0;
                var lesAfroamericanos = 0;
                var lesAapi = 0;
                var lesMusulmanes = 0;
                var lesMujeres = 0;
                var lesBlancos = 0;
                var lesOtres = 0;
                //grupos etarios
                var menorDeEdad = 0;
                var veinteAnos = 0;
                var treintaAnos = 0;
                var cuarentaAnos = 0;
                var cincuentaAnos = 0;
                var sesentaAnos = 0;
                var setentaAnos = 0;
                //etnias atacadores
                var blancx = 0;
                var negrx = 0;
                var latinx = 0;
                var asiaticx = 0;

                //consultando en cada elemento del arreglo
                data.forEach((d) => {
                    //genero
                    if (d.Gender == "male") {
                        losHombres = losHombres + 1;
                    } else {
                        lasMujeres = lasMujeres + 1;
                    }
                    //grupos atacados
                    if (d.BiasMotivation == "ANTIASIAN") {
                        lesAapi = lesAapi + 1;
                    } else if (d.BiasMotivation == "ANTIBLACK") {
                        lesAfroamericanos = lesAfroamericanos + 1;
                    } else if (d.BiasMotivation == "ANTIFEMALE") {
                        lesMujeres = lesMujeres + 1;
                    } else if (d.BiasMotivation == "ANTIMUSLIM") {
                        lesMusulmanes = lesMusulmanes + 1;
                    } else if (d.BiasMotivation == "ANTIJEWISH") {
                        lesJudios = lesJudios + 1;
                    } else if (d.BiasMotivation == "ANTIMALE_HOMOSEXUAL") {
                        lesLGBT = lesLGBT + 1;
                    } else if (d.BiasMotivation == "ANTI_LGBT") {
                        lesLGBT = lesLGBT + 1;
                    } else if (d.BiasMotivation == "ANTITRANSGENDER") {
                        lesLGBT = lesLGBT + 1;
                    } else if (d.BiasMotivation == "ANTIWHITE") {
                        lesBlancos = lesBlancos + 1;
                    } else {
                        lesOtres = lesOtres + 1;
                    }
                    //grupos atacadores edad
                    if (d.AgeGroup == "10_20") {
                        menorDeEdad = menorDeEdad + 1;
                    } else if (d.AgeGroup == "20_30") {
                        veinteAnos = veinteAnos + 1;
                    } else if (d.AgeGroup == "30_30") {
                        treintaAnos = treintaAnos + 1;
                    } else if (d.AgeGroup == "30_40") {
                        treintaAnos = treintaAnos + 1;
                    } else if (d.AgeGroup == "40_40") {
                        cuarentaAnos = cuarentaAnos + 1;
                    } else if (d.AgeGroup == "40_50") {
                        cuarentaAnos = cuarentaAnos + 1;
                    } else if (d.AgeGroup == "50_50") {
                        cincuentaAnos = cincuentaAnos + 1;
                    } else if (d.AgeGroup == "50_60") {
                        cincuentaAnos = cincuentaAnos + 1;
                    } else if (d.AgeGroup == "60_60") {
                        sesentaAnos = sesentaAnos + 1;
                    } else if (d.AgeGroup == "60_70") {
                        sesentaAnos = sesentaAnos + 1;
                    } else {
                        setentaAnos = setentaAnos + 1;
                    }
                    //atacadores etnia
                    if (d.Race == "WHITE") {
                        blancx = blancx + 1;
                    } else if (d.Race == "BLACK") {
                        negrx = negrx + 1;
                    } else if (d.Race == "WHITE_HISPANIC") {
                        latinx = latinx + 1;
                    } else if (d.Race == "BLACK_HISPANIC") {
                        latinx = latinx + 1;
                    } else if (d.Race == "ASIAN_PACIFIC_ISLANDER") {
                        asiaticx = asiaticx + 1;
                    }
                });
                //gráficar
                //poblacion nueva york
                new Chart(document.getElementById("primerCan").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["blanco", "latino", "afroamericano", "asiatico", "nativo americano", "dos o mas grupos"],
                        datasets: [{ data: [31, 29, 20, 16, 1, 3], label: "Composicion de la poblacion de nyc", backgroundColor: ["#F06EC4", "#AB72F7", "#7396E0", "#495F8F", "#8856a7", "#34147f"] }],
                    },
                    options: {
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                });
                //victimas
                new Chart(document.getElementById("tercerCan").getContext("2d"), {
                    type: "bar",
                    data: {
                        labels: ["personas asiaticas", "personas negras", "mujeres", "personas musulmanes", "personas judias", "personas lgbt", "personas blancas", "Otros"],
                        datasets: [
                            {
                                data: [lesAapi, lesAfroamericanos, lesMujeres, lesMusulmanes, lesJudios, lesLGBT, lesBlancos, lesOtres],
                                label: "Grupos de personas atacadas",
                                backgroundColor: ["#728FCE", "#4863A0", "#2B547E", "#36454F", "#29465B", "#2B3856", "#123456", "#151B54"],
                            },
                        ],
                    },
                    options: {
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                });
            }
        </script>

    </body>
</html>
